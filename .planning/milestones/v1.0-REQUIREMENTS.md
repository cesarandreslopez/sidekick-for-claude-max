# Requirements Archive: v1.0 SDK Migration

**Archived:** 2026-01-21
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Sidekick for Max

**Defined:** 2026-01-20
**Core Value:** Use your existing Claude Max tokens for fast inline completions without paying for another subscription

## v1 Requirements

Requirements for TypeScript SDK migration milestone. Each maps to roadmap phases.

### Infrastructure

- [x] **INFRA-01**: Extension runs without Python server dependency
- [x] **INFRA-02**: Extension uses @anthropic-ai/sdk for API key authentication
- [x] **INFRA-03**: Extension uses @anthropic-ai/claude-agent-sdk for Max subscription authentication
- [x] **INFRA-04**: User can switch between API key and Max subscription auth modes
- [x] **INFRA-05**: Extension bundled with esbuild for fast packaging
- [x] **INFRA-06**: All services use async patterns (no extension host blocking)
- [x] **INFRA-07**: Proper Disposable pattern for all event listeners (no memory leaks)

### Completions

- [x] **COMP-01**: User sees ghost text completions as they type
- [x] **COMP-02**: User can accept full completion with Tab
- [x] **COMP-03**: User can accept word-by-word with Ctrl+Right (partial accept)
- [x] **COMP-04**: Completions are debounced to avoid excessive requests
- [x] **COMP-05**: Requests are cancelled when user keeps typing
- [x] **COMP-06**: Multi-line completions work correctly
- [x] **COMP-07**: Completions are cached to avoid duplicate API calls
- [x] **COMP-08**: User can configure model for completions (Haiku/Sonnet/Opus)

### Transforms

- [x] **TRANS-01**: User can select code and trigger transform command
- [x] **TRANS-02**: User can enter instruction for transformation
- [x] **TRANS-03**: Selected code is replaced with transformed result
- [x] **TRANS-04**: User can configure model for transforms (Haiku/Sonnet/Opus)

### User Experience

- [x] **UX-01**: Status bar shows connection status (connected/disconnected)
- [x] **UX-02**: Status bar shows loading state during API calls
- [x] **UX-03**: Status bar shows error state when requests fail
- [x] **UX-04**: Status bar shows current model in use
- [x] **UX-05**: Extension works in Cursor IDE without modification

### Cleanup

- [x] **CLEAN-01**: Python server directory (sidekick-server/) deleted
- [x] **CLEAN-02**: Server startup script (start-server.sh) deleted
- [x] **CLEAN-03**: Server-related settings (serverUrl) removed from extension
- [x] **CLEAN-04**: README updated to reflect new setup (no server)
- [x] **CLEAN-05**: CI/CD updated to remove Python testing

## v2 Requirements

Deferred to future release. Tracked but not in current roadmap.

### Advanced Features

- **ADV-01**: Streaming completions for longer responses
- **ADV-02**: Token usage statistics display
- **ADV-03**: Per-workspace model configuration
- **ADV-04**: Completion history/undo

### Distribution

- **DIST-01**: Publish to OpenVSX marketplace
- **DIST-02**: Cursor-specific marketplace listing (if different)

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Built-in chat panel | Duplicates Claude Code CLI — use that instead |
| Agent/autonomous mode | Scope creep, not aligned with "quick completions" value prop |
| Codebase indexing | Infrastructure burden, not needed for completions |
| Telemetry/analytics | Privacy-focused users, adds complexity |
| JetBrains/Vim support | Focus on VS Code ecosystem (includes Cursor) |
| Direct OAuth to Claude Max | Anthropic doesn't allow third-party OAuth |

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| INFRA-01 | Phase 1 | Complete |
| INFRA-02 | Phase 1 | Complete |
| INFRA-03 | Phase 1 | Complete |
| INFRA-04 | Phase 1 | Complete |
| INFRA-05 | Phase 1 | Complete |
| INFRA-06 | Phase 1 | Complete |
| INFRA-07 | Phase 1 | Complete |
| COMP-01 | Phase 2 | Complete |
| COMP-02 | Phase 2 | Complete |
| COMP-03 | Phase 2 | Complete |
| COMP-04 | Phase 2 | Complete |
| COMP-05 | Phase 2 | Complete |
| COMP-06 | Phase 2 | Complete |
| COMP-07 | Phase 2 | Complete |
| COMP-08 | Phase 2 | Complete |
| TRANS-01 | Phase 3 | Complete |
| TRANS-02 | Phase 3 | Complete |
| TRANS-03 | Phase 3 | Complete |
| TRANS-04 | Phase 3 | Complete |
| UX-01 | Phase 3 | Complete |
| UX-02 | Phase 3 | Complete |
| UX-03 | Phase 3 | Complete |
| UX-04 | Phase 3 | Complete |
| UX-05 | Phase 3 | Complete |
| CLEAN-01 | Phase 4 | Complete |
| CLEAN-02 | Phase 4 | Complete |
| CLEAN-03 | Phase 4 | Complete |
| CLEAN-04 | Phase 4 | Complete |
| CLEAN-05 | Phase 4 | Complete |

**Coverage:**
- v1 requirements: 29 total
- Shipped: 29
- Unmapped: 0

---

## Milestone Summary

**Shipped:** 29 of 29 v1 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-01-21 as part of v1.0 milestone completion*
